{
  "profiles": {
    "general": {
      "display_name": "学习笔记",
      "aliases": ["default", "学习笔记", "lecture", "note", "general_note", "study_note"],
      "system_template": "你是一名专业的学习笔记整理助手。需要阅读用户提供的图片内容，提取关键信息并产出结构化 JSON。请保持内容准确、逻辑清晰，并且始终使用简体中文。",
      "user_template": "请解析上面的所有图片，提取原始文本并在 JSON 的 raw_text 字段输出完整内容。title 需简洁概括主题；summary 总结重点；sections 按时间或逻辑拆分，每个元素包含 heading 与 content。key_points 提炼 3-7 个要点；study_advice 给出可执行的复习建议。当前主题分类为：{note_type}；标签：{tags_text}。如果存在模糊或无法识别的区域，请在 meta.warnings 中说明。",
      "schema": {
        "format": {
          "type": "json_schema",
          "name": "structured_learning_note",
          "schema": {
            "type": "object",
            "properties": {
              "title": {"type": "string"},
              "summary": {"type": "string"},
              "raw_text": {"type": "string"},
              "sections": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "heading": {"type": "string"},
                    "content": {"type": "string"}
                  },
                  "required": ["heading", "content"],
                  "additionalProperties": false
                }
              },
              "key_points": {
                "type": "array",
                "items": {"type": "string"}
              },
              "study_advice": {"type": "string"},
              "meta": {
                "type": "object",
                "additionalProperties": true,
                "properties": {
                  "subject": {"type": "string"},
                  "prompt_profile": {"type": "string"},
                  "warnings": {
                    "type": "array",
                    "items": {"type": "string"}
                  },
                  "tags": {
                    "type": "array",
                    "items": {"type": "string"}
                  }
                }
              }
            },
            "required": [
              "title",
              "summary",
              "raw_text",
              "sections",
              "key_points",
              "study_advice"
            ],
            "additionalProperties": false
          }
        }
      }
    },
    "classical_chinese": {
      "display_name": "文言文精读",
      "aliases": ["文言文", "古文", "国学", "classical_chinese", "wenyan"],
      "system_template": "你是一位资深的古汉语教师，擅长讲解文言文并翻译成现代汉语。请根据图片中的内容生成结构化笔记，保留原文风貌并提供准确的译注。",
      "user_template": "请完整抄录原文到 raw_text，随后给出现代汉语翻译（translation）以及逐条注释（annotations）。annotations 应为数组，每项包含 original 与 explanation 字段。sections 用于整理段落或语义层次；key_points 聚焦文学特色、历史背景或修辞手法。study_advice 提供背诵及理解建议。若遇到难以辨认的字词，请在 meta.warnings 标注。当前主题：{note_type}；标签：{tags_text}。",
      "schema": {
        "format": {
          "type": "json_schema",
          "name": "structured_learning_note",
          "schema": {
            "type": "object",
            "properties": {
              "title": {"type": "string"},
              "summary": {"type": "string"},
              "raw_text": {"type": "string"},
              "translation": {"type": "string", "description": "现代汉语翻译"},
              "annotations": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "original": {"type": "string"},
                    "explanation": {"type": "string"}
                  },
                  "required": ["original", "explanation"],
                  "additionalProperties": false
                }
              },
              "sections": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "heading": {"type": "string"},
                    "content": {"type": "string"}
                  },
                  "required": ["heading", "content"],
                  "additionalProperties": false
                }
              },
              "key_points": {
                "type": "array",
                "items": {"type": "string"}
              },
              "study_advice": {"type": "string"},
              "meta": {
                "type": "object",
                "additionalProperties": true,
                "properties": {
                  "subject": {"type": "string"},
                  "prompt_profile": {"type": "string"},
                  "warnings": {
                    "type": "array",
                    "items": {"type": "string"}
                  },
                  "tags": {
                    "type": "array",
                    "items": {"type": "string"}
                  }
                }
              }
            },
            "required": [
              "title",
              "summary",
              "raw_text",
              "sections",
              "key_points",
              "study_advice"
            ],
            "additionalProperties": false
          }
        }
      }
    },
    "math": {
      "display_name": "数学解析",
      "aliases": ["数学", "数理化", "math", "mathematics"],
      "system_template": "你是一名数学竞赛教练，擅长解析题干、公式与解题步骤。务必确保符号与公式正确，逻辑推导严谨。所有数学公式请务必使用 LaTeX 格式（行内公式用 $...$ 包裹，独立公式用 $$...$$ 包裹）。注意：在 JSON 字符串中，LaTeX 的反斜杠必须双重转义（例如 \\\\frac 而非 \\frac）。",
      "user_template": "请提取题干与结论，raw_text 保留完整原文（公式用 LaTeX）。formulas 字段需列出关键公式，包含 formula（LaTeX 格式）与 explanation。worked_examples 为数组，记录每道例题的 problem 与 solution_steps（使用有序列表描述步骤，公式用 LaTeX）。sections 按知识点或题目分组；key_points 总结核心思想；study_advice 给出练习与巩固建议。当前主题：{note_type}；标签：{tags_text}。",
      "schema": {
        "format": {
          "type": "json_schema",
          "name": "structured_learning_note",
          "schema": {
            "type": "object",
            "properties": {
              "title": {"type": "string"},
              "summary": {"type": "string"},
              "raw_text": {"type": "string"},
              "formulas": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "formula": {"type": "string"},
                    "explanation": {"type": "string"}
                  },
                  "required": ["formula", "explanation"],
                  "additionalProperties": false
                }
              },
              "worked_examples": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "problem": {"type": "string"},
                    "solution_steps": {"type": "string", "description": "使用有序列表格式概述步骤"}
                  },
                  "required": ["problem", "solution_steps"],
                  "additionalProperties": false
                }
              },
              "sections": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "heading": {"type": "string"},
                    "content": {"type": "string"}
                  },
                  "required": ["heading", "content"],
                  "additionalProperties": false
                }
              },
              "key_points": {
                "type": "array",
                "items": {"type": "string"}
              },
              "study_advice": {"type": "string"},
              "meta": {
                "type": "object",
                "additionalProperties": true,
                "properties": {
                  "subject": {"type": "string"},
                  "prompt_profile": {"type": "string"},
                  "warnings": {
                    "type": "array",
                    "items": {"type": "string"}
                  },
                  "tags": {
                    "type": "array",
                    "items": {"type": "string"}
                  }
                }
              }
            },
            "required": [
              "title",
              "summary",
              "raw_text",
              "sections",
              "key_points",
              "study_advice"
            ],
            "additionalProperties": false
          }
        }
      }
    },
    "english": {
      "display_name": "英语精读",
      "aliases": ["英语", "english", "language", "esl"],
      "system_template": "你是一位英语教师，专注于词汇、语法和句型讲解。请保持中英文解释准确，并提供必要的例句。",
      "user_template": "raw_text 字段保留原文。vocabulary 为数组，每项包含 term、meaning 与 example。grammar_points 需列出语法点，含 topic、explanation、examples。important_sentences 保存需要背诵的关键句。sections 可按段落或主题拆分。key_points 与 study_advice 聚焦学习策略与巩固方法。当前主题：{note_type}；标签：{tags_text}。",
      "schema": {
        "format": {
          "type": "json_schema",
          "name": "structured_learning_note",
          "schema": {
            "type": "object",
            "properties": {
              "title": {"type": "string"},
              "summary": {"type": "string"},
              "raw_text": {"type": "string"},
              "vocabulary": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "term": {"type": "string"},
                    "meaning": {"type": "string"},
                    "example": {"type": "string"}
                  },
                  "required": ["term", "meaning"],
                  "additionalProperties": false
                }
              },
              "grammar_points": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "topic": {"type": "string"},
                    "explanation": {"type": "string"},
                    "examples": {"type": "string", "description": "可使用项目符号列出例句"}
                  },
                  "required": ["topic", "explanation"],
                  "additionalProperties": false
                }
              },
              "important_sentences": {
                "type": "array",
                "items": {"type": "string"}
              },
              "sections": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "heading": {"type": "string"},
                    "content": {"type": "string"}
                  },
                  "required": ["heading", "content"],
                  "additionalProperties": false
                }
              },
              "key_points": {
                "type": "array",
                "items": {"type": "string"}
              },
              "study_advice": {"type": "string"},
              "meta": {
                "type": "object",
                "additionalProperties": true,
                "properties": {
                  "subject": {"type": "string"},
                  "prompt_profile": {"type": "string"},
                  "warnings": {
                    "type": "array",
                    "items": {"type": "string"}
                  },
                  "tags": {
                    "type": "array",
                    "items": {"type": "string"}
                  }
                }
              }
            },
            "required": [
              "title",
              "summary",
              "raw_text",
              "sections",
              "key_points",
              "study_advice"
            ],
            "additionalProperties": false
          }
        }
      }
    },
    "physics": {
      "display_name": "物理要点",
      "aliases": ["物理", "physics", "science_physics"],
      "system_template": "你是一位物理竞赛教练。请解析图片中的知识点、定律与实验步骤，确保公式与单位准确。所有数学公式请务必使用 LaTeX 格式（行内公式用 $...$ 包裹，独立公式用 $$...$$ 包裹）。注意：在 JSON 字符串中，LaTeX 的反斜杠必须双重转义（例如 \\\\frac 而非 \\frac）。",
      "user_template": "raw_text 保存原文（公式用 LaTeX）。principles 列出核心定律（name 与 explanation）。equations 数组包含 symbol、formula（LaTeX 格式）、usage。applications 记录实际应用场景，包含 scenario 与 explanation。sections 用于组织知识结构；key_points 与 study_advice 聚焦理解与实践。当前主题：{note_type}；标签：{tags_text}。",
      "schema": {
        "format": {
          "type": "json_schema",
          "name": "structured_learning_note",
          "schema": {
            "type": "object",
            "properties": {
              "title": {"type": "string"},
              "summary": {"type": "string"},
              "raw_text": {"type": "string"},
              "principles": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {"type": "string"},
                    "explanation": {"type": "string"}
                  },
                  "required": ["name", "explanation"],
                  "additionalProperties": false
                }
              },
              "equations": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "symbol": {"type": "string"},
                    "formula": {"type": "string"},
                    "usage": {"type": "string"}
                  },
                  "required": ["formula"],
                  "additionalProperties": false
                }
              },
              "applications": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "scenario": {"type": "string"},
                    "explanation": {"type": "string"}
                  },
                  "required": ["scenario", "explanation"],
                  "additionalProperties": false
                }
              },
              "sections": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "heading": {"type": "string"},
                    "content": {"type": "string"}
                  },
                  "required": ["heading", "content"],
                  "additionalProperties": false
                }
              },
              "key_points": {
                "type": "array",
                "items": {"type": "string"}
              },
              "study_advice": {"type": "string"},
              "meta": {
                "type": "object",
                "additionalProperties": true,
                "properties": {
                  "subject": {"type": "string"},
                  "prompt_profile": {"type": "string"},
                  "warnings": {
                    "type": "array",
                    "items": {"type": "string"}
                  },
                  "tags": {
                    "type": "array",
                    "items": {"type": "string"}
                  }
                }
              }
            },
            "required": [
              "title",
              "summary",
              "raw_text",
              "sections",
              "key_points",
              "study_advice"
            ],
            "additionalProperties": false
          }
        }
      }
    }
  }
}
